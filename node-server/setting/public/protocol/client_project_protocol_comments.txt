Файл: pub_client-project-protocol.json
Назначение: пример ПУБЛИЧНОГО описания формата входящих клиентских сообщений проекта
(Hello / Subscribe / Unsubscribe), с которыми работает локальный Node-сервер.
Используется как шаблон. Реальные значения и логика задаются в private/protocol/.

Структура JSON:
  wrappers.<name>      — описание логических типов клиентских сообщений
                         (hello, subscribe, unsubscribe и т.п.), с которыми работает локальный сервер.
  wrappers.<name>.t    — значение поля "t" в сообщении клиента; по нему сервер определяет тип сообщения.
  wrappers.<name>.p    — пример структуры тела (payload) такого сообщения, может содержать плейсхолдеры ${...}.

  paths.<key>          — логические имена часто используемых полей (например, "Subscribe.instrument").
                         Значения — строковые JSON-пути до этих полей.
                         В публичном файле приведены абстрактные примеры путей, в private/protocol/
                         указываются реальные пути под формат проекта.


-------------------------
wrappers.HelloMessage
-------------------------
Назначение:
  Пример клиентского сообщения "приветствия", по которому локальный сервер
  может распознать начало сессии/подключения.

Поля:
  t:
    • В публичном примере: "CLIENT_HELLO_REQUEST".
    • В приватной конфигурации в private/protocol/ указывается реальное значение поля "t",
      по которому сервер будет распознавать hello-сообщение клиента.


----------------------------
wrappers.SubscribeMessage
----------------------------
Назначение:
  Описывает клиентское сообщение подписки, которое отправляет клиент.
  В этом сообщении клиент указывает, на какой инструмент нужно оформить подписку,
  а локальный сервер принимает это сообщение и фиксирует запрос на подписку.

Фактическое поведение:
  • Клиент отправляет JSON с полем "t" и телом (payload).
  • Сервер читает поле "t" во входящем сообщении и сравнивает его со значением,
    указанным в SubscribeMessage.t (из приватной конфигурации).
    По совпадению сервер определяет, что это именно сообщение подписки.
  • В payload этого сообщения клиент передаёт код инструмента.
    Точное местоположение поля с кодом инструмента описывается в секции paths
    (ключ Subscribe.instrument) в приватной конфигурации.
  • Полученный по этому пути код инструмента сервер дальше использует для построения
    ответа на подписку в соответствии с текущим сценарием.

Поля:
  t:
    • В публичном примере: "CLIENT_SUBSCRIBE_REQUEST".
    • В приватной конфигурации в private/protocol/ задаётся реальная строка,
      которая приходит в поле "t" от клиента для сообщения подписки.

  p:
    • В публичном примере показан один из возможных вариантов payload:
        "p": {
          "Instruments": ["${INSTRUMENT_CODE}"]
        }
    • Плейсхолдер "${INSTRUMENT_CODE}" показывает, что в этом месте клиент передаёт
      код инструмента, на который хочет подписаться.
    • Реальная структура payload (имя поля, массив/объект и т.п.) и конкретный
      плейсхолдер настраиваются в priv_client-project-protocol.json под фактический
      формат клиентского JSON.


-------------------------------
wrappers.UnsubscribeMessage
-------------------------------
Назначение:
  Описывает клиентское сообщение отписки, которое отправляет клиент.
  По этому сообщению локальный сервер понимает, что клиент хочет прекратить
  ранее оформленную подписку и выполняет логику отписки/очистки состояния.

Фактическое поведение:
  • Клиент отправляет JSON с полем "t".
  • Сервер читает поле "t" во входящем сообщении и сравнивает его со значением,
    указанным в UnsubscribeMessage.t (из приватной конфигурации).
  • При совпадении сервер воспринимает сообщение как запрос на отписку и
    выполняет запрограммированную логику обработки отписки для данного клиента
    (очистка связанных данных и отправка соответствующего ответа).

Поля:
  t:
    • В публичном примере: "CLIENT_UNSUBSCRIBE_REQUEST".
    • В приватной конфигурации в private/protocol/ задаётся реальная строка,
      которая приходит в поле "t" от клиента для сообщения отписки.


-----------------------
paths.Subscribe.instrument
-----------------------
Назначение:
  Указывает, где именно в JSON-сообщении подписки находится код инструмента.
  Сервер использует это значение, чтобы извлечь инструмент, который клиент
  передал в SubscribeMessage.

Фактическое поведение:
  • После того как сервер определяет тип сообщения по SubscribeMessage.t,
    он берёт путь из "Subscribe.instrument" как строковый JSON-путь.
  • Этот путь применяется ко входящему JSON и позволяет получить значение поля,
    содержащего код инструмента.
  • Извлечённый код инструмента сервер использует для построения ответа на подписку
    и дальнейшей логики (сценарии, фильтры bid/ask, zeroFlash и т.п.).

Публичный пример:
  "paths": {
    "Subscribe.instrument": "p.INSTRUMENT_FIELD"
  }

Смысл:
  • "p.INSTRUMENT_FIELD" — абстрактный пример пути.
    Он показывает только то, что в приватной конфигурации должен быть указан
    реальный путь до поля с кодом инструмента.

Приватная конфигурация:
  • В priv_client-project-protocol.json вместо "p.INSTRUMENT_FIELD"
    указывается фактический JSON-путь, соответствующий реальной структуре
    клиентского сообщения. Например:
      - "p.instrument"
  • Конкретное значение зависит от того, как клиент формирует своё сообщение
    подписки и где в нём лежит код инструмента.
