Файл: pub_client-system-protocol.json
Назначение: пример ПУБЛИЧНОГО описания формата системных клиентских сообщений
(hello, status.get, config.get, control, scenario.set, manual.quote), которые
десктоп-утилита отправляет на управляющий WebSocket локального Node-сервера.

Публичная версия полностью соответствует приватной версии
(priv_client-system-protocol.json), так как системные сообщения не содержат
конфиденциальных данных.

Структура JSON:
  wrappers.<name>         — описание логических типов системных сообщений,
                            которые приложение отправляет на сервер.
  wrappers.<name>.t       — значение поля "t" в системном сообщении; по нему сервер
                            определяет тип команды.
  wrappers.<name>.<field> — дополнительные поля системного сообщения (cmd, scenario и т.п.),
                            при необходимости могут содержать плейсхолдеры ${...}.

  connectStartMessages    — список логических команд, которые автоматически
                            отправляются после установления WebSocket-соединения.

  out.<logicalKey>        — сопоставляет логическое имя команды и шаблон из секции wrappers.
                            Эти настройки используются как для обычных команд,
                            так и для команд из connectStartMessages.


-------------------------
wrappers.ControlHello
-------------------------
Назначение:
  Описывает системное сообщение "hello", которое приложение отправляет серверу
  при установлении управляющего соединения.

Поля:
  t:
    • В публичном примере: "ControlHello".
    • В приватной конфигурации используется то же значение, по которому сервер
      определяет управляющее hello-сообщение.


-------------------------
wrappers.GetStatus
-------------------------
Назначение:
  Описывает системное сообщение запроса статуса. Приложение отправляет его,
  чтобы получить от сервера текущее состояние управления (например: активность
  клиента, разрешён ли приём подключений и т.п.).

Поля:
  t:
    • В публичном примере: "GetStatus".
    • В приватной конфигурации используется то же значение, по которому сервер
      распознаёт запрос статуса.


-------------------------
wrappers.GetConfig
-------------------------
Назначение:
  Описывает системное сообщение запроса конфигурации. По этой команде сервер
  возвращает список доступных сценариев работы биржевого стакана.

Где находятся сценарии:
  • сценарии определены в системном конфиге:
        node-server/setting/setting.json
    (поле "scenarios")

Поля:
  t:
    • В публичном примере: "GetConfig".
    • В приватной конфигурации используется то же значение.


-------------------------
wrappers.SetScenario
-------------------------
Назначение:
  Описывает системное сообщение смены сценария работы стакана. Приложение
  отправляет его, чтобы переключить текущий активный сценарий.

Поля:
  t:
    • В публичном примере: "SetScenario".
  scenario:
    • В публичном примере: "${scenario}".
    • Плейсхолдер для идентификатора сценария.

Источник сценариев:
  • список сценариев берётся из node-server/setting/setting.json (поле "scenarios").


-------------------------
wrappers.Control
-------------------------
Назначение:
  Описывает универсальное системное сообщение управления. Приложение отправляет
  такие сообщения для выполнения различных действий (например: включить/выключить
  приём клиентских подключений, выполнить управляющую операцию и т.п.).

Поля:
  t:
    • В публичном примере: "Control".
  cmd:
    • В публичном примере: "${cmd}" — плейсхолдер имени управляющей команды.


-------------------------
wrappers.ManualQuote
-------------------------
Назначение:
  Описывает системное сообщение ручного управления котировками. Используется,
  когда необходимо отправить серверу набор операций для изменения стакана в
  режиме ручного редактирования.

Поля:
  t:
    • В публичном примере: "Control".
  cmd:
    • Зафиксировано как "manualQuote".
  ops:
    • В публичном примере: "${ops}" — плейсхолдер списка операций.
  replaceCurrent:
    • В публичном примере: "${replaceCurrent}" — плейсхолдер флага замены текущего состояния.


-------------------------
connectStartMessages
-------------------------
Назначение:
  Определяет список логических команд, которые автоматически отправляются
  приложением сразу после установления управляющего WebSocket-соединения.

Публичный пример:
  [
    "hello",
    "config.get",
    "status.get"
  ]

Смысл:
  • каждый элемент — это ключ из секции out.<logicalKey>;
  • фактическое сообщение формируется через соответствующую обёртку из wrappers.


-------------------------
out.<logicalKey>
-------------------------
Назначение:
  Связывает логическое имя системной команды с шаблоном из wrappers.
  Эти настройки используются как при отправке обычных команд,
  так и при отправке команд из connectStartMessages.

Публичный пример:
  "out": {
    "hello":        { "template": "ControlHello" },
    "status.get":   { "template": "GetStatus" },
    "config.get":   { "template": "GetConfig" },
    "control":      { "template": "Control" },
    "scenario.set": { "template": "SetScenario" },
    "manual.quote": { "template": "ManualQuote" }
  }

Смысл:
  • ключи ("hello", "status.get" и т.п.) используются кодом приложения;
  • поле template определяет, какую обёртку из wrappers использовать
    для построения JSON-команды, отправляемой на сервер.
